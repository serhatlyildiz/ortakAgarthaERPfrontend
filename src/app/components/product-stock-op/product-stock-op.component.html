<div *ngIf="isLoading">YÃ¼kleniyor...</div>
<div *ngIf="!isLoading && errorMessage" class="error-message">
  {{ errorMessage }}
</div>
<div *ngIf="!isLoading && !errorMessage" style="overflow-x: auto">
    <div class="d-flex align-items-center justify-content-between mb-3 search-container">
        <!-- Sol tarafa ÃœrÃ¼n Kodu arama -->
        <div>
          <label for="productCodeSearch">ÃœrÃ¼n Kodu :</label>
          &nbsp;
          <input
            id="productCodeSearch"
            type="text"
            [(ngModel)]="searchProductCode"
            (input)="filterProducts()"
            placeholder="ÃœrÃ¼n kodu ara"
          />
        </div>
        <button class="btn btn-danger" (click)="navigateToProductStatusHistory()">
          Stok kayÄ±tlarÄ±
         </button>
        <!-- SaÄŸ tarafa [+] Yeni ÃœrÃ¼n -->
        <button class="btn btn-success" (click)="navigateToProductAdd()">
         + Yeni ÃœrÃ¼n
        </button>
      </div>
  <table class="table table-hover" >
    <thead>
      <tr>
        <th (click)="sort('productCode')">
          ÃœrÃ¼n Kodu
          <span *ngIf="sortKey  === 'productCode'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('productName')">
          ÃœrÃ¼n AdÄ±
          <span *ngIf="sortKey  === 'productName'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('productDescription')">
          AÃ§Ä±klama
          <span *ngIf="sortKey  === 'productDescription'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('superCategoryName')">
          Cinsiyet Kategori
          <span *ngIf="sortKey  === 'superCategoryName'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('categoryName')">
          Kategori
          <span *ngIf="sortKey  === 'categoryName'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('unitPrice')">
          Fiyat
          <span *ngIf="sortKey  === 'unitPrice'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
        <th (click)="sort('totalStock')">
          Stok
          <span *ngIf="sortKey === 'totalStock'">
            {{ sortOrder === "asc" ? "ðŸ”¼" : "ðŸ”½" }}
          </span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let product of filteredProducts"
        class="product-row"
      >
        <td>{{ product.productCode }}</td>
        <td>{{ product.productName }}</td>
        <td>{{ product.productDescription }}</td>
        <td>{{ product.superCategoryName }}</td>
        <td>{{ product.categoryName }}</td>
        <td>{{ product.unitPrice | currency : "â‚º" }}</td>
        <td>
          <button class="btn btn-primary" (click)="productStockUpdate(product.productCode, product.productId)">
            StoklarÄ± GÃ¶rÃ¼ntÃ¼le ({{ product.totalStock || 0 }})
          </button>

          <button 
    class="btn btn-danger ms-2" 
    (click)="deleteProduct(product.productId)" 
    [disabled]="product.totalStock > 0">
    Sil
  </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
